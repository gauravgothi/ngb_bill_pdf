<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WZ Electricity Bill</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
            font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;
        }
        body{
            background:#e5edf7;
            padding:9px;
            color:#222;
        }
        .container{
            max-width:210mm;
            margin:0 auto;
        }
        .page{
            background:#fff;
            border-radius:6px;
            box-shadow:0 4px 10px rgba(0, 0, 0, 0.15);
            margin-bottom:16px;
            padding:10mm 9mm;
            position:relative;
            overflow:hidden;
        }
        .page::before{
            content:"";
            position:absolute;
            top:0;
            left:0;
            width:100%;
            height:4px;
            background:linear-gradient(90deg,#e99905,#00a4ff);
        }

/* ---------- HEADER (compact, attractive, centered text) --------- */
.header-top{
    /* margin-top: -20px; */
    display:flex;
    align-items:center;
    justify-content:center;      /* fully center aligns header */
    padding:4px 0 3px;
    border-bottom:3px solid #d0d7e3;
    margin-bottom:4px;
}

.header-left{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    flex-wrap:nowrap;
    width:100%;
}

.logo-circle{
    width:42px;
    height:42px;
    border-radius:50%;
    border:2px solid #b66a00;
    display:flex;
    align-items:center;
    justify-content:center;
    background:radial-gradient(circle at 30% 30%, #fff 0, #fff 45%, #ffe7c2 80%);
    box-shadow:0 0 3px rgba(0,0,0,0.12);
}

.logo-circle img{
    width:34px;
    height:34px;
    object-fit:contain;
}

/* CENTER ALIGN TEXT HERE */
.company-info{
    text-align:center;
    line-height:1.25;
}

.company-title{
    font-size:14px;
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:0.4px;
    color:#7a4305;
}

.company-subtitle{
    font-size:11px;
    color:#444;
}

.tagline{
    font-size:10px;
    margin-top:1px;
    color:#555;
}

.tagline a{
    color:#1f6fd4;
    text-decoration:none;
}
.tagline a:hover{
    text-decoration:underline;
}

/* Mobile adjustments */
@media (max-width:768px){
    .header-left{
        flex-direction:column;
        gap:6px;
    }
}


/* small tweak for mobile */
@media (max-width:768px){
    .header-top{
        flex-direction:column;
        align-items:flex-start;
        padding:3px 0;
        margin-bottom:3px;
    }
    .company-title{
        font-size:13px;
    }
    .company-subtitle{
        font-size:10px;
    }
    .tagline{
        font-size:9px;
    }
}


        /* Generic table styles */
        table{
            width:100%;
            border-collapse:collapse;
        }
        th,td{
            border:1px solid #b7bbc2;
            padding:4px 2px;
            font-size:10px;
            text-align:left;
            font-family: 'Arial Narrow', Arial, sans-serif;
        }
        th{
            background:#dfcdad;
            color:#02183b;
        }
        td{
            background:#fff;
            color:#0a0a0a;
        }
        .no-border td,.no-border th{border:none;}
        .section-title{
            background:#bb840e;
            color:#fff;
            font-size:10px;
            font-weight:700;
            text-align:left;
            padding:3px 4px;
            margin:6px 0 2px;
            border-radius:3px;
        }
        .small{
            font-size:8px;
        }
        .right{text-align:right;}
        .center{text-align:center;}
        .nowrap{white-space:nowrap;}

        .discom-name-cell{
            background:#1f6fd4;
            color:#fff;
            text-align:center;
            font-size:20px;
            font-weight:700;
            padding:14px 4px;
        }
        .discom-subtitle{
            font-size:9px;
            margin-top:2px;
            opacity:.9;
        }
        .consumer-name{
            font-weight:700;
            font-size:11px;
        }

        /* QR image */
        .qr-img{
            width:36mm;
            height:36mm;
            border-radius:3px;
            box-shadow:0 0 4px rgba(0,0,0,0.15);
        }

        /* Chart containers (common look) */
        .chart-area{
            padding:4px;
            background:linear-gradient(180deg,#f7f9fc 0%,#ffffff 60%);
            border:1px solid #d0d7e3;
            border-radius:4px;
        }

        .chart-area canvas{
            width:100% !important;
            height:140px !important;
        }

        #componentsChart{
            max-width:60mm;
            max-height:60mm;
            margin:0 auto;
            display:block;
        }

        /* ---------- Consumption Trend bars (old CSS, kept) ---------- */
        .bars-row{
            display:flex;
            align-items:flex-end;
            justify-content:space-between;
            height:40mm;
            border-bottom:1px solid #3c5e97;
            padding:2px 4px 4px;
            position:relative;
        }
        .bars-row::before,
        .bars-row::after{
            content:"";
            position:absolute;
            left:0;
            width:100%;
            border-top:1px dashed rgba(60,94,151,.25);
        }
        .bars-row::before{
            bottom:50%;
        }
        .bars-row::after{
            bottom:25%;
        }
        .month-bar{
            flex:1;
            margin:0 2px;
            display:flex;
            flex-direction:column;
            align-items:center;
        }
        .bar-dual{
            display:flex;
            align-items:flex-end;
            gap:2px;
            height:100%;
        }
        .bar-prev,.bar-current{
            width:6px;
            border-radius:2px 2px 0 0;
            position:relative;
        }
        .bar-prev{background:#88b4ff;}
        .bar-current{background:#ff6b6b;}
        .bar-current::after{
            content:attr(data-units);
            position:absolute;
            bottom:100%;
            left:50%;
            transform:translate(-50%,-2px);
            font-size:7px;
            color:#333;
            white-space:nowrap;
        }
        .bar-month-label{font-size:7px;margin-top:2px;}
        .legend-row{
            display:flex;
            justify-content:center;
            gap:10px;
            margin-top:4px;
            font-size:7px;
        }
        .legend-box{
            width:8px;height:8px;border-radius:2px;
            display:inline-block;
        }

        /* ---------- Donut (static fallback) ---------- */
        .donut{
            width:34mm;
            height:34mm;
            border-radius:50%;
            background:conic-gradient(
                #ffb74d 0% 40%,
                #64b5f6 40% 65%,
                #81c784 65% 80%,
                #e57373 80% 100%
            );
            position:relative;
            margin:0 auto;
            box-shadow:0 0 4px rgba(0,0,0,0.12);
        }
        .donut-center{
            position:absolute;
            width:18mm;
            height:18mm;
            top:50%;
            left:50%;
            transform:translate(-50%,-50%);
            border-radius:50%;
            background:#fff;
            display:flex;
            align-items:center;
            justify-content:center;
            text-align:center;
            font-size:8px;
            font-weight:700;
            color:#1c4b95;
            box-shadow:0 0 2px rgba(0,0,0,0.15) inset;
        }

        /* ---------- Power Factor bars (old CSS, kept) ---------- */
        .pf-bars{
            display:flex;
            align-items:flex-end;
            justify-content:space-between;
            height:32mm;
            border-bottom:1px solid #d0d7e3;
            padding:0 2px 3px;
            position:relative;
        }
        .pf-bars::before{
            content:"";
            position:absolute;
            left:0;
            bottom:50%;
            width:100%;
            border-top:1px dashed rgba(0,0,0,0.2);
        }
        .pf-bar-wrap{
            flex:1;
            margin:0 2px;
            display:flex;
            flex-direction:column;
            align-items:center;
        }
        .pf-bar{
            width:6px;
            border-radius:2px 2px 0 0;
            background:#1f6fd4;
            position:relative;
        }
        .pf-bar:after{
            content:attr(data-pf);
            position:absolute;
            top:-12px;
            left:50%;
            transform:translateX(-50%);
            font-size:7px;
            color:#0b2e6d;
        }
        .pf-month{font-size:7px;margin-top:1px;}

        /* ---------- TOD MD bars (old CSS, kept) ---------- */
        .tod-md-bars{
            display:flex;
            align-items:flex-end;
            justify-content:space-around;
            height:30mm;
            border-bottom:1px solid #3c5e97;
            padding:2px 4px 4px;
            position:relative;
        }
        .tod-md-bars::before{
            content:"";
            position:absolute;
            left:0;
            bottom:50%;
            width:100%;
            border-top:1px dashed rgba(60,94,151,.25);
        }
        .tod-md-bar-wrap{
            display:flex;
            flex-direction:column;
            align-items:center;
        }
        .tod-md-bar{
            width:10px;
            border-radius:3px 3px 0 0;
            background:#ff6b6b;
            position:relative;
        }
        .tod-md-bar::after{
            content:attr(data-units);
            position:absolute;
            bottom:100%;
            left:50%;
            transform:translate(-50%,-2px);
            font-size:7px;
            color:#333;
            white-space:nowrap;
        }
        .tod-md-label{
            font-size:7px;
            margin-top:2px;
        }

        .note-box{
            border:1px dashed #d0d7e3;
            padding:3px 4px;
            font-size:8px;
            margin-top:3px;
            background:#fafbff;
        }

        .footer-small{
            margin-top:4px;
            font-size:8px;
            text-align:right;
            color:#666;
        }

        .table-scroll{width:100%;overflow-x:auto;}

        /* --------- NEW: Connection info styling (4 kv pairs per row) --------- */
        .kv-label{
            background:#f6efe1;
            font-weight:600;
        }
        .kv-value{
            background:#ffffff;
        }
        .connection-table td{
            padding:3px 4px;
        }

        /* --------- NEW: Bill breakup layout (positive vs negative) --------- */
        .bill-breakup-layout{
            display:flex;
            gap:6px;
            flex-wrap:wrap;
            margin-top:3px;
        }
        .bill-col{
            flex:1 1 48%;
            border:1px solid #d0d7e3;
            border-radius:4px;
            background:linear-gradient(180deg,#f9fafc 0%,#ffffff 60%);
            padding:3px;
        }
        .bill-col-title{
            font-size:9px;
            font-weight:700;
            text-transform:uppercase;
            padding:2px 3px;
            margin-bottom:2px;
            border-bottom:1px solid #e0e3ea;
            color:#333;
        }
        .bill-subheading{
            background:#f3ece0;
            font-weight:700;
            font-size:9px;
        }
        .amount-pos{
            color:#045d2f;
            font-weight:700;
        }
        .amount-neg{
            color:#b00020;
            font-weight:700;
        }

        @media (max-width:768px){
            .bill-col{
                flex:1 1 100%;
            }
        }


        /* --------- Print behaviour & page breaking --------- */
        @media print {
            @page {
                size: A4 portrait;
                margin: 8mm;
            }

            body {
                background: #fff !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            .page {
                box-shadow: none !important;
                border-radius: 0 !important;
                margin: 0 !important;
                page-break-after: always;
                break-after: page;
                padding: 4mm 6mm !important;
                overflow: visible !important;
            }

            .page:last-child {
                page-break-after: auto !important;
                break-after: auto !important;
            }

            .page table {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }

            .table-scroll {
                overflow: visible !important;
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }

            .page tr,
            .page th,
            .page td {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }

            thead {
                display: table-header-group;
            }
            tfoot {
                display: table-footer-group;
            }

            .section-title {
                page-break-after: avoid !important;
                break-after: avoid !important;
                margin-top: auto;
            }

            #consumptiontrend_charts {
                margin-top:5px;
            }

            img {
                max-width: 100% !important;
            }

            .bars-row {
                height: 32mm;
            }

            .pf-bars {
                height: 26mm;
            }

            .tod-md-bars {
                height: 24mm;
            }

            .donut {
                width: 30mm;
                height: 30mm;
            }

            .section-title.section-consumption {
                margin-top: 12px;
            }

            .chart-area canvas {
                width: 100% !important;
                height: 45mm !important;
            }

            #componentsChart{
                width:60mm !important;
                height:60mm !important;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <!-- PAGE 1 -->
    <div class="page">
<!-- HEADER -->
<div class="header-top">
    <div class="header-left">
        <div class="logo-circle">
            <img src="wzlogo.png" alt="">
        </div>

        <div class="company-info">
            <div class="company-title">
                <strong>Madhya Pradesh Paschim Kshetra Vidyut Vitran Company Limited.</strong>
            </div>
            <div class="company-subtitle">
                G.P.H. Compound, Pologround, Indore (M.P.)
            </div>
            <div class="tagline">(Wholly owned by Govt. of M.P.)</div>
            <div class="tagline">
                <a href="https://www.mpwz.co.in" target="_blank">Website: https://www.mpwz.co.in</a> |
                <a href="tel:1912">Call Centre No. 1912</a>
            </div>
            <div class="tagline">
                GST No: <strong>23AADCM7397N1ZU</strong> |
                CIN No: <strong>U40109MP2002SGC015121</strong>
            </div>
        </div>

        <div class="logo-circle">
            <img src="wzlogo.png" alt="">
        </div>

    </div>
</div>


        <!-- CONSUMER INFORMATION -->
        <div class="section-title">CONSUMER INFORMATION</div>

<table class="connection-table">
    <tr>
        <td class="kv-label">Customer No</td>
        <td class="kv-value">N3104003053</td>

        <td class="kv-label">Mobile No</td>
        <td class="kv-value" colspan="2">9898989898</td>

        <td class="kv-label">Email</td>
        <td class="kv-value" colspan="2">dM5S@example.com</td>
    </tr>
    <tr>
        <td class="kv-label">Customer Name</td>
        <td class="kv-value" colspan="7">Mr. Prakash Kumar S/o Mr. Rakash Kumar Dutta</td>
    </tr>

    <tr>
        <td class="kv-label">Full Address</td>
        <td class="kv-value" colspan="7">
            1st Floor, Plot No. 1, G.P.H. Compound, Pologround, Indore (M.P.)
        </td>
    </tr>

    <tr>
        <td class="kv-label">BPL No</td>
        <td class="kv-value">1234567890</td>

        <td class="kv-label">Employee No</td>
        <td class="kv-value">1234567890</td>

        <td class="kv-label">Aadhaar Available</td>
        <td class="kv-value">Yes</td>

        <td class="kv-label">PAN Available</td>
        <td class="kv-value">Yes</td>
    </tr>

    <tr>
        <td class="kv-label">Consumer Type</td>
        <td class="kv-value">Domestic</td>

        <td class="kv-label">Connection Status</td>
        <td class="kv-value">Active</td>

        <td class="kv-label">Billing Cycle</td>
        <td class="kv-value">Monthly</td>

        <td class="kv-label">Consumer Category</td>
        <td class="kv-value">Residential</td>
    </tr>
</table>


        <!-- CONNECTION INFORMATION (redesigned: 4 key–value pairs per row) -->
        <div class="section-title">CONNECTION INFORMATION</div>
        <table class="connection-table">
            <tr>
                <td class="kv-label">Division Name</td>
                <td class="kv-value">Indore East Division</td>

                <td class="kv-label">Location Name</td>
                <td class="kv-value">Anand Nagar Zone | 3465201</td>

                <td class="kv-label">Group No.</td>
                <td class="kv-value">KNW47</td>

                <td class="kv-label">Diary No.</td>
                <td class="kv-value">12</td>
            </tr>
            <tr>
                <td class="kv-label">Feeder Name</td>
                <td class="kv-value">11 KV Anand Nagar | 3465201125414</td>

                <td class="kv-label">Alternate Feeder</td>
                <td class="kv-value">11 KV Anand Nagar | 3465201125414</td>

                <td class="kv-label">Purpose of Connection</td>
                <td class="kv-value">Domestic</td>

                <td class="kv-label">Tariff Category</td>
                <td class="kv-value">LV1 (LV1.2)</td>
            </tr>
            <tr>
                <td class="kv-label">DTR Name</td>
                <td class="kv-value">100KVA Palasiya Nagar | 3465201125414</td>

                <td class="kv-label">Premise Type</td>
                <td class="kv-value">Urban</td>

                <td class="kv-label">Sanctioned Load (kW)</td>
                <td class="kv-value">1 kW</td>

                <td class="kv-label">Phase</td>
                <td class="kv-value">Single Phase</td>
            </tr>
            <tr>
                <td class="kv-label">Contract Demand</td>
                <td class="kv-value">1.0</td>

                <td class="kv-label">Pole No</td>
                <td class="kv-value">125441514</td>

                <td class="kv-label">MD</td>
                <td class="kv-value">1 kW</td>

                <td class="kv-label">Meter Serial No</td>
                <td class="kv-value">MIG6150143053</td>
            </tr>
            <tr>
                <td class="kv-label">Connection Date</td>
                <td class="kv-value">23-06-2017</td>

                <td class="kv-label">Prepaid Date</td>
                <td class="kv-value">23-06-2017</td>

                <td class="kv-label">Is Prepaid</td>
                <td class="kv-value">Yes</td>

                <td class="kv-label">Is Net Meter</td>
                <td class="kv-value">No</td>
            </tr>
            <tr>
                <td class="kv-label">Is Beneficiary</td>
                <td class="kv-value">No</td>

                <td class="kv-label">Meter Location</td>
                <td class="kv-value">Consumer Premises</td>

                <td class="kv-label">Seal Status</td>
                <td class="kv-value">Intact</td>

                <td class="kv-label">Meter Accuracy Class</td>
                <td class="kv-value">1.0</td>
            </tr>
        </table>

        <!-- BILL SUMMARY -->
        <div class="section-title">BILL SUMMARY</div>
        <table>
            <tr>
                <td class="kv-label">Bill Month</td>
                <td class="kv-label">Bill Date</td>
                <td class="kv-label">Due Date</td>
                <td class="kv-label">Current Bill Amount</td>
                <td class="kv-label">Total Payable Till Due Date</td>
                <td class="kv-label">Total Payable After Due Date</td>
                <td class="kv-label">Security Deposit</td>
                <td class="kv-label">Security Deposit Pending</td>
            </tr>
            <tr>
                <td>OCT-2025</td>
                <td>22-10-2025</td>
                <td>01-11-2025</td>
                <td>₹ 808.98</td>
                <td>₹ 2,163.00</td>
                <td>₹ 2,190.00</td>
                <td>₹ 0.00</td>
                <td>₹ 0.00</td>
            </tr>
        </table>

        <!-- QR + Billing Snapshot -->
        <table style="margin-top:4px;">
            <tr>
                <td style="width:23%;" class="section-title center">Quick Pay QR / Account</td>
                <td style="width:47%;" class="section-title">Billing &amp; Payment Snapshot</td>
            </tr>
            <tr>
                <td style="vertical-align:top;">
                    <div class="center">
                        <div class="qr-box">
                            <img src="qr_codeimage.jpeg" alt="" style="width:120px; height:120px;">
                        </div>
                        <div  style="margin-top:2px;">
                           <strong> <h4>Scan using any UPI app to pay your bill.</h4></strong>   
                        </div>
                    </div>
                </td>
                <td style="vertical-align:top;">
                    <table class="small">
                        <tr>
                            <td class="kv-label">Bill No</td>
                            <td class="kv-value">170019029540</td>
                            <td class="kv-label">Bill Type</td>
                            <td class="kv-value">Domestic</td>
                            </tr>
                            <tr>
                            <td class="kv-label">Meter Reader Name &amp; No</td>
                            <td class="kv-value">Shyam Kumar | 1234567890</td>
                            <td class="kv-label">Total Consumption</td>
                            <td class="kv-value">1700</td>
                            </tr>
                            <tr>
                            <td class="kv-label">Average Bill</td>
                            <td class="kv-value">₹ 808.98</td>
                            <td class="kv-label">Average Units</td>
                            <td class="kv-value">12</td>
                        </tr>
                        <tr>
                            <td class="kv-label">Reading Type</td><td class="kv-value">NORMAL</td>
                            <td class="kv-label">Meter Type</td><td class="kv-value">NetMeter/Normal</td></td>
                        </tr>
                    </table>
                     <div class="section-title">Solar Plant Details</div>
                    <table>                        
                    <tr>                       
                        <td class="kv-label">Plant Capacity</td>
                        <td class="kv-value">8 KW</td>
                        <td class="kv-label">Carry Forward Units</td>
                        <td class="kv-value">399</td>
                    </tr>
                    </table>
                </td>
            </tr>
        </table>

        <!-- CURRENT READING -->
        <div class="section-title">CURRENT READING DETAILS</div>
        <div class="table-scroll">
            <table>
                <tr>
                    <td class="kv-label">Particulars</td>
                    <td class="kv-label">Reading Date</td>
                    <td class="right kv-label">Meter Reading</td>
                    <td class="right kv-label">M.F.</td>
                    <td class="right kv-label">Metered Units</td>
                    <td class="right kv-label">Assessed Units</td>
                    <td class="right kv-label">Total Units</td>
                    <td class="right kv-label">Average Unit / Day</td>
                    <td class="right kv-label">GMC Units</td>
                    <td class="right kv-label">Billed Ubits</td>
                </tr>

                <tr>
                    <td>Import Reading</td>
                    <td>21-10-2025</td>
                    <td class="right">200.00</td>
                    <td class="right">1</td>
                    <td class="right">130.00</td>
                    <td class="right">0.00</td>
                    <td class="right">130.00</td>
                    <td class="right">4.48</td>
                    <td class="right">0.00</td>
                    <td class="right">0.00</td>
                </tr>
                <tr>
                    <td> Export Reading</td>
                    <td>21-10-2025</td>
                    <td class="right">520.00</td>
                    <td class="right">1</td>
                    <td class="right">85.00</td>
                    <td class="right">0.00</td>
                    <td class="right">85.00</td>
                    <td class="right">2.93</td>
                    <td class="right">0.00</td>
                    <td class="right">0.00</td>
                </tr>
            </table>
        </div>

        <!-- LAST 6 MONTHS + CONSUMPTION CHART -->
        <table style="margin-top:4px;">
            <tr>
                <td style="width:50%;vertical-align:top;" class="section-title">Last Six Months Consumption</td>
                <td style="text-align:left;" class="section-title">Meter Reading Trends</td>
            </tr>
            <tr>
                <td style="width:50%;vertical-align:top;">
                    <table>
                        <tr>
                            <td>Bill Month</td>
                            <td>Bill Date</td>
                            <td class="right">Reading</td>
                            <td class="right">Units</td>
                        </tr>
                        <tr><td>OCT-2024</td><td>25-10-2024</td><td class="right">102</td><td class="right">149</td></tr>
                        <tr><td>MAY-2025</td><td>21-05-2025</td><td class="right">202</td><td class="right">140</td></tr>
                        <tr><td>JUN-2025</td><td>20-06-2025</td><td class="right">205</td><td class="right">127</td></tr>
                        <tr><td>JUL-2025</td><td>21-07-2025</td><td class="right">200</td><td class="right">127</td></tr>
                        <tr><td>AUG-2025</td><td>20-08-2025</td><td class="right">205</td><td class="right">135</td></tr>
                        <tr><td>SEP-2025</td><td>22-09-2025</td><td class="right">200</td><td class="right">130</td></tr>
                    </table>
                </td>
                <td style="vertical-align:top;">
                    <div class="chart-area">
                        <!-- Bar Chart for Consumption Trend -->
                        <canvas id="consumptionChart"></canvas>
                    </div>
                </td>
            </tr>
        </table>
        <div class="section-title">Meter Replacement and Read Detail</div>
        <table>
            <tr>
                <td>
                    <table class="small">
                        <tr>
                            <td>Meter Detail</td>
                            <td class="right">Prev / Start Read</td>
                            <td class="right">Final / Current Read</td>
                            <td class="right">Consumption</td>
                            <td class="right">Prorated Current Bill</td>
                        </tr>
                        <tr>
                            <td>Main Meter (Old)</td>
                            <td class="right">1,250.00</td>
                            <td class="right">1,450.00</td>
                            <td class="right">200.00</td>
                            <td class="right">2,950.00</td>
                        </tr>
                        <tr>
                            <td>Main Meter (New)</td>
                            <td class="right">0.00</td>
                            <td class="right">130.00</td>
                            <td class="right">130.00</td>
                            <td class="right">2,163.00</td>
                        </tr>
                        <tr>
                            <td>Net Meter (Solar Export)</td>
                            <td class="right">435.00</td>
                            <td class="right">520.00</td>
                            <td class="right">85.00</td>
                            <td class="right">-380.00</td>
                        </tr>
                        <tr>
                            <td>Smart Meter (AMI)</td>
                            <td class="right">3,085.00</td>
                            <td class="right">3,215.00</td>
                            <td class="right">130.00</td>
                            <td class="right">2,163.00</td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        <div class="footer-small">Page 1 of 4</div>
    </div>

    <!-- PAGE 2 -->
    <div class="page">

        <!-- DETAILED BILL BREAKUP (positive left, negative right) -->
        <div class="section-title">DETAILED BILL BREAKUP</div>
        <div class="bill-breakup-layout">
            <!-- POSITIVE SIDE -->
            <div class="bill-col">
                <div class="bill-col-title">Billing Charges Information (+)</div>
                <table>
                    <tr><td colspan="2" class="bill-subheading">Energy &amp; Fixed</td></tr>
                    <tr>
                        <td>Energy charges</td>
                        <td class="right amount-pos">₹ 658.18</td>
                    </tr>
                    <tr>
                        <td>Fixed charges</td>
                        <td class="right amount-pos">₹ 106.00</td>
                    </tr>
                    <tr>
                        <td>Total energy charges without Govt duty</td>
                        <td class="right amount-pos">₹ 747.00</td>
                    </tr>

                    <tr><td colspan="2" class="bill-subheading">Duties</td></tr>
                    <tr>
                        <td>Govt duty @ 10.00%</td>
                        <td class="right amount-pos">₹ 62.00</td>
                    </tr>
                    

                    <tr><td colspan="2" class="bill-subheading">Other Charges</td></tr>
                    <tr>
                        <td>Metering charges</td>
                        <td class="right amount-pos">₹ 62.00</td>
                    </tr>
                    <tr>
                        <td>ASD Installments</td>
                        <td class="right amount-pos">₹ 62.00</td>
                    </tr>
                    <tr>
                        <td>Welding/PF surcharge/Incentive</td>
                        <td class="right amount-pos">₹ 62.00</td>
                    </tr>
                    <tr>
                        <td>Penal &amp; charges</td>
                        <td class="right amount-pos">₹ 62.00 </td>
                    </tr>
                    <tr>
                        <td>Other/TOD Rebate/SurCharges</td>
                        <td class="right amount-pos">₹ 62.00</td>
                    </tr>
              

                    <tr><td colspan="2" class="bill-subheading">Arrears &amp; Adjustments</td></tr>
                    <tr>
                        <td>Previous dues (Principal arrear)</td>
                        <td class="right amount-pos">₹ 1,618.00</td>
                    </tr>
                    <tr>
                        <td>Cumulative surcharge</td>
                        <td class="right amount-pos">₹ 268.02</td>
                    </tr>
                    <tr>
                        <td>Online / Advance payment incentive</td>
                        <td class="right">₹ 0.00</td>
                    </tr>
                    <tr>
                        <td>Other debit / credit</td>
                        <td class="right">₹ 0.00</td>
                    </tr>
                    <tr>
                        <td>Delayed payment charges</td>
                        <td class="right">₹ 0.00</td>
                    </tr>
                </table>
            </div>

            <!-- NEGATIVE / CREDIT SIDE -->
            <div class="bill-col">
                <div class="bill-col-title">Subsidy &amp; Credits  Information (–)</div>
                <table>
                    <tr><td colspan="2" class="bill-subheading">Energy Related</td></tr>
                    <tr>
                        <td>FPPCA (Fuel &amp; Power Purchase Cost Adjustment)</td>
                        <td class="right amount-neg">₹ -17.19</td>
                    </tr>

                    <tr><td colspan="2" class="bill-subheading">Government Subsidy</td></tr>
                    <tr>
                        <td>Subsidy (M.P. Govt.)</td>
                        <td class="right amount-neg">₹ -531.99</td>
                    </tr>

                    <!-- Reserve space if later you add more credits -->
                    <tr>
                        <td>Rebate / Incentive (if any)</td>
                        <td class="right">₹ 0.00</td>
                    </tr>
                    <tr>
                        <td>Round-off / Adjustment</td>
                        <td class="right">₹ 0.00</td>
                    </tr>
                </table>
                
                                <div class="center" style="margin-top: 10px;">
                                    <!-- Doughnut chart for Major Bill Components -->
                                    <canvas id="componentsChart"></canvas>
                                    <div class="small">₹ 2,163 (Total)</div>
                                </div>
            </div>
        </div>

        <!-- TOTAL -->
        <table style="margin-top:4px;">
            <tr>
                <td style="font-weight:700;">Total Amount Due</td>
                <td class="right" style="font-weight:700;">₹ 2,163.00</td>
            </tr>
        </table>

        <!-- LAST PAYMENT + HISTORY -->
        <div class="section-title">LAST PAYMENT &amp; HISTORY</div>
        <table>
            <tr>
                <td>Last Payment Month</td>
                <td class="right">Amount Paid (₹)</td>
                <td>Payment Ref. No.</td>
                <td>Payment Date</td>
                <td>Mode</td>
            </tr>
            <tr>
                <td>AUG-2025</td>
                <td class="right">2,100.00</td>
                <td>DTD020920527242</td>
                <td>02-09-2025</td>
                <td>Online UPI</td>
            </tr>
            <tr>
                <td>DEC-2024</td>
                <td class="right">1,900.00</td>
                <td>DTD020920527242</td>
                <td>31-12-2024</td>
                <td>Cash</td>
            </tr>
        </table>

        <!-- CONTACT & GRIEVANCE -->
        <div class="section-title">CONTACT US &amp; GRIEVANCE REDRESSAL</div>
        <table>
            <tr>
                <td>
                    <table>
                        <tr>
                            <td class="kv-label bold" colspan="2">Call Centre (Toll Free)</td>
                            <td class="kv-value center"><h3>1912</h3></td>
                        </tr>
                        <tr>
                            <th>Officer Name</th>
                            <th>Officer Designation</th>
                            <th>Contact No.</th>
                        </tr>
                        <tr>
                            <td>Mr. Rahul Singh</td>
                            <td> Assistant Engineer</td>
                            <td>1800-233-1912</td>
                        </tr>
                        <tr>
                            <td>Mr. Gopal Singh</td>
                            <td> Executive Engineer</td>
                            <td>+91-9876543210</td>
                        </tr>
                    </table>
                    </div>
                </td>
                <td>
                    <div style="text-align:center;margin-top:10px;">
                        <img src="qr_codeimage.jpeg" alt="WhatsApp QR Code" width="70" height="70" />
                        <div> <h3>Scan to join WhatsApp Group</h3></div>
                    </div>
                </td>
            </tr>
        </table>

        <div class="footer-small">Page 2 of 4</div>
    </div>

    <!-- PAGE 3 -->
    <div class="page">
        <!-- TOD MD & Charges -->
        <div class="section-title">TOD RECORDED MD &amp; TOD CHARGES</div>
        <table>
            <tr>
                <td style="width:40%;">TOD Recorded MD (Visual + Table)</td>
                <td>TOD Consumption &amp; Charges</td>
            </tr>
            <tr>
                <td class="chart-area">
                    <!-- Pie Chart for TOD MD -->
                    <canvas id="todMdChart" style="text-decoration: solid; color: rgb(17, 0, 0);"></canvas>
                </td>
                <td>
                    <table>
                        <tr>
                            <td>ZONE</td>
                            <td>TIMING</td>
                            <td>Units</td>
                            <td>Rate (₹/kWh)</td>
                            <td>Charges (₹)</td>
                        </tr>
                        <tr>
                            <td>A</td>
                            <td>00:00–06:00 &amp; 22:00–24:00</td>
                            <td>437.25</td>
                            <td>6.50</td>
                            <td>2,842.13</td>
                        </tr>
                        <tr>
                            <td>B</td>
                            <td>06:00–09:00 &amp; 12:00–18:00</td>
                            <td>469.50</td>
                            <td>8.20</td>
                            <td>3,849.90</td>
                        </tr>
                        <tr>
                            <td>C</td>
                            <td>09:00–12:00</td>
                            <td>120.12</td>
                            <td>10.50</td>
                            <td>1,261.26</td>
                        </tr>
                        <tr>
                            <td>D</td>
                            <td>18:00–22:00</td>
                            <td>456.75</td>
                            <td>9.80</td>
                            <td>4,476.15</td>
                        </tr>
                        <tr>
                            <td>Total Energy Charges</td>
                            <td>1,650.00</td>
                            <td></td>
                            <td>12,429.44</td>
                        </tr>
                    </table>
                    <div class="small">
                        By shifting peak hour consumption (zones C + D) to off-peak zones (A),
                        you may avail higher TOD rebates and lower demand charges.
                    </div>
                </td>
            </tr>
        </table>
        <!-- TOD & SOLAR ROOFTOP BILL TABLE -->
<table>
    <!-- Top heading row -->
    <tr>
        <th colspan="7" style="text-align:left;">
            Billing Unit : <strong>10</strong> &nbsp;&nbsp;&nbsp;
            P.F. : <strong>10.2</strong>
        </th>
        <th colspan="2" style="text-align:center;">
            <strong>Solar Rooftop Bill</strong>
        </th>
    </tr>

    <!-- Column headers -->
    <tr>
        <th>TOD</th>
        <th>Particulars</th>
        <th>Current Read</th>
        <th>Previous Read</th>
        <th>Meter Consumption</th>
        <th>Assessed Units</th>
        <th>Final Consumption</th>
        <th>Net</th>
        <th>Amount</th>
    </tr>

    <!-- TOD 1 -->
    <tr>
        <td rowspan="2">
            <strong>TOD 1</strong><br>
            <span class="small">10 PM to 6 AM</span>
        </td>
        <td>Import</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
    </tr>
    <tr>
        <td>Export</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
    </tr>

    <!-- TOD 2 -->
    <tr>
        <td rowspan="2">
            <strong>TOD 2</strong><br>
            <span class="small">6 AM to 9 AM</span>
        </td>
        <td>Import</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
    </tr>
    <tr>
        <td>Export</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
    </tr>

    <!-- TOD 3 -->
    <tr>
        <td rowspan="2">
            <strong>TOD 3</strong><br>
            <span class="small">9 AM to 5 PM</span>
        </td>
        <td>Import</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
    </tr>
    <tr>
        <td>Export</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
    </tr>

    <!-- TOD 4 -->
    <tr>
        <td rowspan="2">
            <strong>TOD 4</strong><br>
            <span class="small">5 PM to 10 PM</span>
        </td>
        <td>Import</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
    </tr>
    <tr>
        <td>Export</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
        <td class="right">10.20</td>
    </tr>
</table>


        <!-- POWER FACTOR TREND & SUMMARY -->
        <div class="section-title">POWER FACTOR TREND &amp; SUMMARY</div>
        <table>
            <tr>
                <td style="width:60%;">Power Factor Trend (Last 12 Months)</td>
                <td>PF Summary</td>
            </tr>
            <tr>
                <td class="chart-area">
                    <!-- Column Chart for Power Factor Trend -->
                    <canvas id="pfChart"></canvas>
                    <div class="small" style="margin-top:4px;">
                        Target PF: 1.00 (Unity). Maintaining PF above 0.95 helps reduce apparent power demand.
                    </div>
                </td>
                <td style="vertical-align:top;">
                    <table>
                        <tr><td>Parameter</td><td class="right">Value</td></tr>
                        <tr><td>Billed PF</td><td class="right">0.966</td></tr>
                        <tr><td>Yearly Average PF</td><td class="right">0.973</td></tr>
                        <tr><td>Potential unit saving if PF → 1.0</td><td class="right">≈ 2.75%</td></tr>
                    </table>
                    <div class="note-box">
                        Suggestions:<br>
                        • Install/maintain capacitor banks as per connected load.<br>
                        • Avoid running lightly loaded motors for long durations.<br>
                        • Periodically check meter display / load survey to correct low PF.
                    </div>
                </td>
            </tr>
        </table>
        <!-- VIRTUAL / GROUP NET METER CHILD CONNECTION EXPORT DETAIL -->
<table>
    <tr>
        <th colspan="8" style="text-align:left;">
            Virtual / Group Net Meter Child Connection Export Detail
        </th>
    </tr>

    <!-- Header Row -->
    <tr>
        <th>Consumer No</th>
        <th>Ratio</th>
        <th>Current Read</th>
        <th>Previous Read</th>
        <th>M. F.</th>
        <th>Meter Consumption</th>
        <th>Assessment</th>
        <th>Final Consumption</th>
    </tr>

    <!-- Rows -->
    <tr>
        <td>SS</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
    </tr>

    <tr>
        <td>SS</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
    </tr>

    <tr>
        <td>SS</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
    </tr>

    <tr>
        <td>SS</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
    </tr>

    <tr>
        <td>SS</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
        <td class="right">2.22</td>
    </tr>
</table>


        <!-- OTHER DETAILS -->
        <div class="section-title">OTHER ACCOUNT DETAILS</div>
        <table>
            <tr>
                <td  class="kv-label">Vigilance / O&amp;M Panchanama Detail</td>
            </tr>
            <tr>
                <td>
                    <table class="small">
                        <tr>
                            <td class="kv-label">Description</td>
                            <td class="right kv-label" >Amount (₹)</td>
                            <td class="kv-label">Description</td>
                            <td class="right kv-label" >Amount (₹)</td>
                        </tr>
                        <tr>
                            <td class="kv-label">Vigilance assessment – 15-01-2024 (unauthorised load)</td>
                            <td class="right kv-value">5,250.00</td>
                            <td class="kv-label">O&amp;M Panchanama – 10-03-2024 (meter inspection)</td>
                            <td class="right kv-value">0.00</td>
                        </tr>
                        <tr>
                            <td>Vigilance surcharge adjustment – 05-05-2024</td>
                            <td class="right">1,100.00</td>
                            <td>Reversal of vigilance charge – 20-08-2024</td>
                            <td class="right">-2,000.00</td>
                        </tr>
                    </table>
                </td>
               
            </tr>
            <tr>                
                <td  class="kv-label">CCB Adjustment Detail (Last 4)</td>
            </tr>
            <tr>
                 <td>
                    <table class="small">
                        <tr>
                            <td class="kv-label">Description</td>
                            <td class="right kv-label">Amount (₹)</td>
                            <td class="kv-label">Description</td>
                            <td class="right kv-label">Amount (₹)</td>
                        </tr>
                        <tr>
                            <td class="kv-label">CCB adjustment – rounding difference (JAN-2025)</td>
                            <td class="right kv-value">-15.00</td>
                            <td class="kv-label">CCB adjustment – subsidy reconciliation (FEB-2025)</td>
                            <td class="right kv-value">-120.50</td>
                        </tr>
                        <tr>
                            <td class="kv-label">CCB adjustment – delayed payment charge waiver</td>
                            <td class="right kv-value">-85.25</td>
                            <td class="kv-label">CCB adjustment – arrear correction (APR-2025)</td>
                            <td class="right kv-value">230.00</td>
                        </tr>
                    </table>
                </td>
            </tr>


        </table>
    </div>



</div>

<!-- CHART.JS + CHART INITIALIZATION -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

<script>
Chart.register(ChartDataLabels);

document.addEventListener('DOMContentLoaded', function () {
    /* ========= 1. CONSUMPTION TREND (BAR CHART) ========= */
    const consumptionCtx = document.getElementById('consumptionChart');
    if (consumptionCtx) {
        const months = ['Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'];
        const units = [149, 140, 127, 127, 135, 130];

        new Chart(consumptionCtx, {
            type: 'bar',
            data: {
                labels: months,
                datasets: [{
                    label: 'Units (kWh)',
                    data: units
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: true },
                    tooltip: { enabled: true },
                    datalabels: {
                        anchor: 'end',
                        align: 'end',
                        offset: -2,
                        font: {
                            size: 9
                        },
                        formatter: function(value) {
                            return value;
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false }
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Units'
                        }
                    }
                }
            }
        });
    }

    /* ========= 2. TOD RECORDED MD (PIE CHART) ========= */
    const todMdCtx = document.getElementById('todMdChart');
    if (todMdCtx) {
        const zones = ['Zone A', 'Zone B', 'Zone C', 'Zone D'];
        const mdValues = [437.25, 469.50, 120.12, 456.75];

        new Chart(todMdCtx, {
            type: 'pie',
            data: {
                labels: zones,
                datasets: [{
                    label: 'TOD Recorded MD (kW)',
                    data: mdValues
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                const label = context.label || '';
                                const value = context.parsed;
                                return label + ': ' + value.toFixed(2) + ' kW';
                            }
                        }
                    },
                    datalabels: {
                        color: '#000',
                        font: {
                            size: 8,
                            weight: 'bold'
                        },
                        formatter: function(value) {
                            return value.toFixed(2) + ' kW';
                        }
                    }
                }
            }
        });
    }

    /* ========= 3. POWER FACTOR TREND (BAR CHART) ========= */
    const pfCtx = document.getElementById('pfChart');
    if (pfCtx) {
        const pfMonths = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
        const pfValues = [0.97, 0.978, 0.978, 0.980, 0.976, 0.977, 0.975, 0.972, 0.972, 0.974, 0.977, 0.983];

        new Chart(pfCtx, {
            type: 'bar',
            data: {
                labels: pfMonths,
                datasets: [{
                    label: 'Power Factor',
                    data: pfValues
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: true },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return 'PF: ' + context.parsed.y.toFixed(3);
                            }
                        }
                    },
                    datalabels: {
                        anchor: 'end',
                        align: 'end',
                        offset: -2,
                        font: {
                            size: 8
                        },
                        formatter: function(value) {
                            return value.toFixed(3);
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false }
                    },
                    y: {
                        min: 0.9,
                        max: 1.0,
                        ticks: {
                            stepSize: 0.02
                        },
                        title: {
                            display: true,
                            text: 'Power Factor'
                        }
                    }
                }
            }
        });
    }

    /* ========= 4. MAJOR BILL COMPONENTS (DOUGHNUT CHART) ========= */
    const componentsCtx = document.getElementById('componentsChart');
    if (componentsCtx) {
        const compLabels = [
            'Energy charges',
            'Fixed charges',
            'Govt duty',
            'FPPCA & others'
        ];
        const compValues = [1600, 200, 200, 163];

        new Chart(componentsCtx, {
            type: 'doughnut',
            data: {
                labels: compLabels,
                datasets: [{
                    data: compValues,
                    backgroundColor: [
                        '#ffb74d',
                        '#64b5f6',
                        '#81c784',
                        '#e57373'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '55%',
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom',
                        labels: {
                            boxWidth:20,
                            font: { size: 8 }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                const label = context.label || '';
                                const value = context.parsed;
                                return label + ': ₹ ' + value.toLocaleString();
                            }
                        }
                    },
                    datalabels: {
                        color: '#000',
                        font: {
                            size: 8,
                            weight: 'bold'
                        },
                        formatter: function (value) {
                            return '₹ ' + value;
                        }
                    }
                }
            }
        });
    }
});
</script>
</body>
</html>
